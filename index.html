<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>SIN NADA QUE OCULTAR ‚Äî Responsive</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0a0f1a; --panel:#0f1724; --panel-2:#111827; --border:#223046;
      --text:#eaf1ff; --muted:#9fb0d0; --accent:#3b82f6; --danger:#ef4444;
      --shadow:0 12px 28px rgba(0,0,0,.45);
    }
    body.light{ --bg:#f6f9ff; --panel:#fff; --panel-2:#f0f6ff; --border:#d8e3f5; --text:#0b1320; --muted:#4b5b70; --accent:#1e60d0; --shadow:0 12px 28px rgba(6,30,80,.06) }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
      -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;
      -webkit-tap-highlight-color: transparent;
    }
    a{color:var(--accent);text-decoration:none}
    img{max-width:100%;display:block}

    /* ---------- Header (desktop) ---------- */
    .header{position:sticky;top:0;z-index:60;background:var(--panel);border-bottom:1px solid var(--border);backdrop-filter: blur(6px)}
    .nav{max-width:1240px;margin:0 auto;padding:10px 16px;display:flex;align-items:center;gap:12px}
    .brand{display:flex;align-items:center;gap:12px;min-width:220px}
    .brand-logo{width:44px;height:44px;border-radius:10px;overflow:hidden;background:linear-gradient(135deg,#0b1220,#152033);display:grid;place-items:center;border:1px solid var(--border)}
    .brand-title h1{font-family:"Playfair Display",serif;margin:0;font-size:18px}
    .brand-title .slogan{font-size:12px;color:var(--muted)}
    .spacer{flex:1}

    .btn{padding:8px 12px;border-radius:8px;border:1px solid var(--border);background:var(--panel-2);color:var(--text);font-weight:700;cursor:pointer}
    .btn-accent{background:var(--accent);color:#fff;border-color:transparent}

    .avatar{width:34px;height:34px;border-radius:50%;object-fit:cover;border:1px solid var(--border)}

    .dropdown{position:relative}
    .dropdown-toggle{background:transparent;border:1px solid var(--border);padding:8px 10px;border-radius:8px;color:var(--text)}
    .dropdown-menu{position:absolute;top:calc(100% + 8px);right:0;background:var(--panel);border:1px solid var(--border);border-radius:12px;min-width:220px;box-shadow:var(--shadow);display:none;z-index:1200}

    /* Notif panel */
    .notif{position:relative}
    .notif-panel{position:absolute;top:calc(100% + 8px);right:0;background:var(--panel);border:1px solid var(--border);border-radius:12px;min-width:360px;box-shadow:var(--shadow);display:none;z-index:1199;max-height:420px;overflow:auto}
    .notif-panel h4{margin:0;padding:12px;border-bottom:1px solid var(--border)}
    .notif-list{padding:8px}

    /* ---------- Layout ---------- */
    .container{max-width:1240px;margin:18px auto;padding:0 16px;display:grid;grid-template-columns:1fr 360px;gap:18px}
    @media(max-width:1100px){ .container{grid-template-columns:1fr} }
    .panel{background:var(--panel);border:1px solid var(--border);border-radius:14px;padding:14px;box-shadow:var(--shadow)}
    .feed{display:block}
    .post{background:var(--panel-2);border:1px solid var(--border);border-radius:12px;padding:12px;margin-bottom:12px}
    .post-title{font-weight:800;margin:0 0 6px;font-size:18px}
    .post-desc{color:var(--muted);margin:0 0 8px}

    /* Right column */
    .right-col{display:flex;flex-direction:column;gap:12px}
    .card{background:var(--panel-2);border:1px solid var(--border);border-radius:12px;padding:12px}

    /* Modal / Backdrop */
    .backdrop{position:fixed;inset:0;background:rgba(6,8,12,.6);display:none;align-items:center;justify-content:center;z-index:1400;overflow:auto}
    .modal{width:clamp(300px,92vw,920px);background:var(--panel);border-radius:12px;border:1px solid var(--border);overflow:hidden;box-shadow:var(--shadow);max-height:calc(100vh - 80px)}
    .modal-head{display:flex;align-items:center;justify-content:space-between;padding:12px;border-bottom:1px solid var(--border)}
    .modal-body{padding:12px;overflow:auto}

    /* Editor */
    .editor{background:var(--panel-2);border:1px solid var(--border);border-radius:10px;padding:10px;min-height:160px;color:var(--text)}

    /* Lightbox */
    .lightbox{position:fixed;inset:0;background:rgba(0,0,0,.92);display:none;align-items:center;justify-content:center;z-index:1600}
    .lightbox img, .lightbox video{max-width:94vw;max-height:94vh;border-radius:10px}

    /* Bottom Navbar mobile */
    .mobile-bottom{display:none}
    .mobile-bottom .navbar{position:fixed;bottom:0;left:0;right:0;height:64px;background:var(--panel);border-top:1px solid var(--border);display:flex;gap:6px;align-items:center;justify-content:space-around;padding:8px;z-index:2000;backdrop-filter:blur(6px)}
    .mobile-bottom .nav-item{display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:11px;color:var(--text);text-decoration:none;width:64px;height:48px;border-radius:12px}
    .mobile-bottom .nav-item .icon{font-size:20px;line-height:20px}
    .mobile-bottom .nav-item .label{font-size:10px;margin-top:4px;color:var(--muted)}
    /* reserve space so content not hidden behind navbar */
    .mobile-safe-height{padding-bottom:84px}

    /* Mobile specifics */
    @media(max-width:640px){
      .header .nav{display:none} /* hide top header controls on small screens */
      .mobile-bottom{display:block}
      body{padding:0;margin:0}
      .container{padding:12px 12px}
      .modal{width:100vw;height:100vh;border-radius:0;max-height:100vh}
      .backdrop{align-items:flex-end}
      .dropdown-menu{position:fixed;top:68px;right:8px;left:8px;width:calc(100vw - 16px);z-index:2005}
      .notif-panel{position:fixed;top:68px;right:8px;left:8px;width:calc(100vw - 16px);z-index:2003;max-height:calc(100vh - 160px)}
      .mobile-bottom .navbar{padding-bottom:env(safe-area-inset-bottom);height:72px}
      .mobile-safe-height{padding-bottom:84px}
      /* Ensure no horizontal scrolling */
      html,body{overflow-x:hidden}
    }

    /* small visual */
    .muted{color:var(--muted);font-size:13px}
    .small{font-size:13px}
    .pill{display:inline-block;padding:6px 10px;border-radius:999px;background:rgba(255,255,255,0.03);border:1px solid var(--border);font-weight:700}
  </style>
</head>
<body>

  <!-- Header (desktop) -->
  <header class="header" role="banner">
    <nav class="nav" role="navigation" aria-label="Principal">
      <div class="brand" aria-hidden="false">
        <div class="brand-logo" aria-hidden="true"><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjS8LXAzi1Yiook-sOoY1qALICMCqeaZIYKCGeGogvvyhP85GNNKH2nPshVJBRtdggNYOAB4JYP10iMRH7FD4887JXS9yiaY6g0dtRqkgj9Vmbuql5VqpzJ0gwUxsMzERwBlKxHbwUTFIwtBWJVPT-Du-HSg8gsbkIz4cl32AWD9fjbtm9p3FDnq4_Wpdc/s320/gg843.png" alt="logo" style="width:36px;height:36px;object-fit:contain"></div>
        <div class="brand-title"><h1>SIN NADA QUE OCULTAR</h1><div class="slogan muted">Periodismo comunitario</div></div>
      </div>

      <div class="spacer" aria-hidden="true"></div>

      <button id="openComposerDesktop" class="btn btn-accent" title="Crear publicaci√≥n">Crear</button>

      <div class="dropdown" id="menuDropdown" style="margin-left:8px;">
        <button class="dropdown-toggle" id="menuToggle" aria-expanded="false">Men√∫ ‚ñæ</button>
        <div class="dropdown-menu" id="menuPanel" role="menu" aria-hidden="true">
          <a href="#">Inicio</a>
          <a href="#">Sobre nosotros</a>
          <a href="#">Contacto</a>
        </div>
      </div>

      <div style="display:flex;gap:8px;align-items:center;margin-left:8px;">
        <div class="notif" id="notifRoot">
          <button id="notifToggle" class="btn" title="Notificaciones">üîî</button>
          <div class="notif-panel" id="notifPanel" aria-hidden="true">
            <h4>Notificaciones</h4>
            <div class="notif-list" id="notifList">
              <div class="muted small">No hay notificaciones nuevas.</div>
            </div>
          </div>
        </div>

        <button id="openDashboardDesktop" class="btn" title="Dashboard">Dashboard</button>

        <img id="topAvatar" class="avatar" src="https://ui-avatars.com/api/?name=Invitado" alt="avatar" style="margin-left:8px">
      </div>
    </nav>
  </header>

  <!-- Main content -->
  <main class="mobile-safe-height" role="main">
    <div class="container">
      <section class="feed panel" aria-live="polite" id="feed">
        <h2 style="margin-top:0">Feed</h2>
        <div id="posts">
          <!-- posts rendered here -->
          <article class="post">
            <div class="post-title">Bienvenida</div>
            <div class="post-desc muted">Sistema cargado con dise√±o responsive. Reemplaza con tu feed real.</div>
            <p class="small">Esta es una entrada de ejemplo para comprobar que el contenido no se desplaza por la pantalla m√≥vil y que el navbar inferior no tapa nada.</p>
          </article>
        </div>
      </section>

      <aside class="right-col" id="rightCol" aria-label="Barra lateral">
        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div>
              <div style="font-weight:800">Tu perfil</div>
              <div class="muted small">Inicia sesi√≥n para m√°s opciones</div>
            </div>
            <img id="sideAvatar" class="avatar" src="https://ui-avatars.com/api/?name=Invitado" alt="avatar">
          </div>
        </div>

        <div class="card">
          <div class="pill">Anuncio</div>
          <div class="muted small" style="margin-top:8px">Espacio publicitario</div>
        </div>

        <div class="card">
          <div style="font-weight:800">Estad√≠sticas</div>
          <div class="muted small" style="margin-top:8px">Posts: <strong id="statPosts">0</strong></div>
        </div>
      </aside>
    </div>
  </main>

  <!-- Composer Modal (used in both desktop and mobile) -->
  <div id="composerModal" class="backdrop" aria-hidden="true" role="dialog" aria-modal="true" aria-label="Crear publicaci√≥n">
    <div class="modal" role="document">
      <div class="modal-head">
        <div style="font-weight:900">Crear publicaci√≥n</div>
        <button id="closeComposer" class="btn" aria-label="Cerrar">‚úï</button>
      </div>
      <div class="modal-body">
        <input id="titleInput" placeholder="T√≠tulo" style="width:100%;padding:10px;border-radius:8px;border:1px solid var(--border);margin-bottom:8px">
        <textarea id="descInput" placeholder="Descripci√≥n breve" style="width:100%;padding:10px;border-radius:8px;border:1px solid var(--border);min-height:80px"></textarea>
        <div style="margin-top:8px" class="editor" contenteditable="true" id="editor">Escribe el contenido aqu√≠...</div>
        <div style="display:flex;gap:8px;margin-top:10px;justify-content:flex-end">
          <button id="publishBtn" class="btn btn-accent">Publicar</button>
          <button id="cancelPublish" class="btn">Cancelar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Dashboard Modal -->
  <div id="dashboardModal" class="backdrop" aria-hidden="true" role="dialog" aria-modal="true" aria-label="Panel de control">
    <div class="modal">
      <div class="modal-head">
        <div style="font-weight:900">Dashboard</div>
        <button id="closeDashboard" class="btn">‚úï</button>
      </div>
      <div class="modal-body">
        <div style="display:flex;gap:12px;flex-wrap:wrap">
          <div style="flex:1;min-width:180px">
            <div class="pill">Publicaciones</div>
            <div style="font-size:22px;font-weight:900;margin-top:8px" id="dashPostsCount">0</div>
          </div>
          <div style="flex:1;min-width:180px">
            <div class="pill">Likes</div>
            <div style="font-size:22px;font-weight:900;margin-top:8px" id="dashLikesCount">0</div>
          </div>
        </div>

        <div style="margin-top:12px">
          <div style="font-weight:800">Tus posts</div>
          <div id="dashPostsList" style="margin-top:8px" class="muted small">A√∫n no hay posts.</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Lightbox -->
  <div id="lightbox" class="lightbox" aria-hidden="true">
    <button id="lightboxClose" class="btn" style="position:absolute;top:16px;right:16px;z-index:1700">Cerrar</button>
    <div id="lightboxInner"></div>
  </div>

  <!-- Mobile bottom navbar -->
  <div class="mobile-bottom" aria-hidden="false">
    <nav class="navbar" role="navigation" aria-label="Navegaci√≥n inferior">
      <a class="nav-item" href="#" id="navHome" title="Inicio">
        <div class="icon">üè†</div>
        <div class="label">Inicio</div>
      </a>
      <a class="nav-item" href="#" id="navMenu" title="Men√∫">
        <div class="icon">‚ò∞</div>
        <div class="label">Men√∫</div>
      </a>
      <a class="nav-item" href="#" id="navCreate" title="Crear">
        <div class="icon">‚ûï</div>
        <div class="label">Crear</div>
      </a>
      <a class="nav-item" href="#" id="navNotif" title="Notificaciones">
        <div class="icon">üîî</div>
        <div class="label">Notif.</div>
      </a>
      <a class="nav-item" href="#" id="navDash" title="Dashboard">
        <div class="icon">üìä</div>
        <div class="label">Dash</div>
      </a>
    </nav>
  </div>

  <footer style="max-width:1240px;margin:12px auto;padding:12px 16px;color:var(--muted);font-size:13px">
    ¬© 2025 SIN NADA QUE OCULTAR ‚Äî Hecho con comunidad
  </footer>

  <!-- Firebase scripts (kept but optional) -->
  <script src="https://www.gstatic.com/firebasejs/10.13.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.13.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.13.0/firebase-firestore-compat.js"></script>

  <script>
    // ---------- Helpers ----------
    function $(id){ return document.getElementById(id) }
    function show(el){ if(!el) return; el.style.display = (el.classList.contains('backdrop') ? 'flex' : 'block'); el.setAttribute('aria-hidden','false') }
    function hide(el){ if(!el) return; el.style.display='none'; el.setAttribute('aria-hidden','true') }
    function toggle(el){ if(!el) return; (el.style.display==='block' || el.style.display==='flex') ? hide(el) : show(el) }

    // Prevent body scroll when modal open (mobile)
    function lockBodyScroll(){ document.documentElement.style.overflow='hidden'; document.body.style.overflow='hidden' }
    function unlockBodyScroll(){ document.documentElement.style.overflow=''; document.body.style.overflow='' }

    // ---------- UI elements ----------
    const menuToggle = $('menuToggle'), menuPanel = $('menuPanel');
    const notifToggle = $('notifToggle'), notifPanel = $('notifPanel'), notifList = $('notifList');
    const openComposerDesktop = $('openComposerDesktop'), composerModal = $('composerModal'), closeComposer = $('closeComposer'), publishBtn = $('publishBtn'), cancelPublish = $('cancelPublish');
    const dashboardModal = $('dashboardModal'), openDashboardDesktop = $('openDashboardDesktop'), closeDashboard = $('closeDashboard');
    const mobileNavMenu = $('navMenu'), mobileNavCreate = $('navCreate'), mobileNavNotif = $('navNotif'), mobileNavDash = $('navDash'), mobileNavHome = $('navHome');
    const lightbox = $('lightbox'), lightboxInner = $('lightboxInner'), lightboxClose = $('lightboxClose');

    // Ensure dropdowns open above all (fix for overlapping)
    function openPanel(panel){
      // close other floating panels
      [menuPanel, notifPanel].forEach(p => { if (p && p !== panel) hide(p); });
      if (!panel) return;
      // Use fixed on mobile to ensure above everything
      if (window.innerWidth <= 640) panel.style.position = 'fixed';
      panel.style.zIndex = 2005;
      show(panel);
    }
    function closeAllPanels(){ [menuPanel, notifPanel].forEach(p => hide(p)); }

    // Dropdown (desktop)
    menuToggle && menuToggle.addEventListener('click', (e) => {
      e.stopPropagation(); openPanel(menuPanel);
    });

    // Notif panel (desktop)
    notifToggle && notifToggle.addEventListener('click', (e) => {
      e.stopPropagation(); openPanel(notifPanel);
    });

    // global click to close floating panels
    document.addEventListener('click', (e) => {
      if (!(menuPanel && menuPanel.contains(e.target)) && !(menuToggle && menuToggle.contains(e.target))) hide(menuPanel);
      if (!(notifPanel && notifPanel.contains(e.target)) && !(notifToggle && notifToggle.contains(e.target))) hide(notifPanel);
    });

    // Desktop composer
    openComposerDesktop && openComposerDesktop.addEventListener('click', ()=> {
      show(composerModal); lockBodyScroll();
    });
    closeComposer && closeComposer.addEventListener('click', ()=> { hide(composerModal); unlockBodyScroll(); });
    cancelPublish && cancelPublish.addEventListener('click', ()=> { hide(composerModal); unlockBodyScroll(); });

    // Mobile bottom nav actions
    mobileNavCreate && mobileNavCreate.addEventListener('click', (e) => { e.preventDefault(); show(composerModal); lockBodyScroll(); });
    mobileNavMenu && mobileNavMenu.addEventListener('click', (e) => { e.preventDefault(); openPanel(menuPanel); menuPanel.style.top = '68px'; menuPanel.style.left = '8px'; menuPanel.style.right = '8px'; menuPanel.style.width = 'calc(100vw - 16px)'; });
    mobileNavNotif && mobileNavNotif.addEventListener('click', (e) => { e.preventDefault(); openPanel(notifPanel); notifPanel.style.top = '68px'; notifPanel.style.left = '8px'; notifPanel.style.right = '8px'; notifPanel.style.width = 'calc(100vw - 16px)'; });
    mobileNavDash && mobileNavDash.addEventListener('click', (e) => { e.preventDefault(); show(dashboardModal); lockBodyScroll(); });
    mobileNavHome && mobileNavHome.addEventListener('click', (e) => { e.preventDefault(); window.scrollTo({top:0,behavior:"smooth"}); });

    // Dashboard
    openDashboardDesktop && openDashboardDesktop.addEventListener('click', ()=> { show(dashboardModal); lockBodyScroll(); });
    closeDashboard && closeDashboard.addEventListener('click', ()=> { hide(dashboardModal); unlockBodyScroll(); });
    dashboardModal && dashboardModal.addEventListener('click', (e) => { if (e.target === dashboardModal) { hide(dashboardModal); unlockBodyScroll(); } });

    // Composer publish (demo: just create a fake post in DOM)
    publishBtn && publishBtn.addEventListener('click', () => {
      const title = $('titleInput').value.trim() || 'Sin t√≠tulo';
      const desc = $('descInput').value.trim() || '';
      const editorHtml = $('editor').innerHTML || '';
      const posts = $('posts');
      const postEl = document.createElement('article'); postEl.className = 'post';
      postEl.innerHTML = `<div class="post-title">${escapeHtml(title)}</div><div class="post-desc muted">${escapeHtml(desc)}</div><div class="small">${editorHtml}</div>`;
      posts.insertBefore(postEl, posts.firstChild);
      // update stats
      const statP = $('statPosts'); statP && (statP.textContent = parseInt(statP.textContent || '0') + 1);
      const dp = $('dashPostsCount'); dp && (dp.textContent = parseInt(dp.textContent || '0') + 1);
      // close composer
      hide(composerModal); unlockBodyScroll();
      // reset
      $('titleInput').value=''; $('descInput').value=''; $('editor').innerHTML='Escribe el contenido aqu√≠...';
      pushNotification('Publicaci√≥n creada: ' + title);
    });

    // Lightbox controls
    function openLightboxContent(html){
      lightboxInner.innerHTML = html;
      show(lightbox);
      lockBodyScroll();
    }
    lightboxClose && lightboxClose.addEventListener('click', ()=>{ hide(lightbox); unlockBodyScroll(); });
    lightbox && lightbox.addEventListener('click', (e)=>{ if(e.target === lightbox) { hide(lightbox); unlockBodyScroll(); } });

    // Notifications demo list
    let notifications = [];
    function renderNotifications(){
      notifList.innerHTML = '';
      if (!notifications.length){ notifList.innerHTML = '<div class="muted small">No hay notificaciones nuevas.</div>'; return; }
      notifications.forEach(n => {
        const row = document.createElement('div');
        row.style.padding = '10px';
        row.style.borderBottom = '1px solid var(--border)';
        row.innerHTML = `<div style="font-weight:700">${escapeHtml(n.title)}</div><div class="muted small">${escapeHtml(n.text)}</div>`;
        notifList.appendChild(row);
      });
    }
    function pushNotification(text){
      notifications.unshift({ title:'Notificaci√≥n', text });
      renderNotifications();
      // small visual badge (optional)
      notifToggle && (notifToggle.textContent = 'üîî');
    }
    // debug push
    pushNotification('Bienvenido ‚Äî dise√±o m√≥vil listo');

    // Utility escape
    function escapeHtml(s){ if(!s) return ''; return String(s).replace(/[&<>"']/g, function(m){ return {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]; }); }

    // Close panels on resize to avoid layout issues
    window.addEventListener('resize', ()=>{ closeAllPanels(); if(window.innerWidth>640){ document.body.style.paddingBottom=''; } else { document.body.style.paddingBottom='84px'; } });

    // Accessibility: keyboard close for modals & panels
    document.addEventListener('keydown', function(e){
      if(e.key==='Escape'){
        hide(composerModal); hide(dashboardModal); hide(menuPanel); hide(notifPanel); hide(lightbox);
        unlockBodyScroll();
      }
    });

    // Prevent horizontal scroll caused by any element
    (function preventOverflow(){
      function check(){
        const docW = document.documentElement.clientWidth;
        const els = document.querySelectorAll('body *');
        for (let el of els){
          if (el.scrollWidth > docW + 1){
            el.style.maxWidth = '100%';
            el.style.boxSizing = 'border-box';
          }
        }
      }
      window.addEventListener('load', check);
      window.addEventListener('resize', check);
      setTimeout(check,400);
    })();

    // Initial fixes on load
    window.addEventListener('load', ()=> {
      // ensure mobile-safe padding
      if (window.innerWidth <= 640) document.body.style.paddingBottom = '84px';
      // close panels default
      hide(menuPanel); hide(notifPanel);
      // bind click to hide menu when clicking outside on mobile
      document.addEventListener('click', (e)=>{
        if (window.innerWidth <= 640){
          const mp = menuPanel; const nt = notifPanel;
          if (mp && !mp.contains(e.target) && !menuToggle.contains(e.target) && !mobileNavMenu.contains(e.target)) hide(mp);
          if (nt && !nt.contains(e.target) && !notifToggle.contains(e.target) && !mobileNavNotif.contains(e.target)) hide(nt);
        }
      });
    });

    // OPTIONAL: Firebase init (kept commented until you replace with your keys)
    /*
    const firebaseConfig = { /* tus keys * / };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const firestore = firebase.firestore();
    */
  </script>
</body>
</html>
